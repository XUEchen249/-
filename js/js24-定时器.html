<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>js24-定时器</title>
  </head>
  <body>
   

    <script>
       

       

      /**
       * 1.定时器
       * -当网页无人值守的时候，自动进行的操作。
       * -定时器是唯一一个能让网页自动运行的方法。只要网页自动运行，那就100%是定时器
       *
       * 2.使用场景：首页图片自动切换，轮播图/倒计时/输入框里的placeholder里的文字滚动...
       *
       * 3.周期性定时器
       * -setInterval(函数名/匿名函数，间隔毫秒数)
       * -每隔一段时间做啥事情  不停的执行 反复   不停的调用   eg：轮播图
       *
       * 4.一次性定时器
       * -setTimeout(函数名/匿名函数，间隔毫秒数)
       * -等待一段时间做啥事情  只执行一次   只调用一次   eg：广告弹出来只一次
       * 7.既然这两个方法可以直接调用，前面不需要加对象名字，那么这两个方法是属于window的方法
       *
       * 5.使用定时器需要满足3个条件： 1.每次要做什么事  2.间隔多长时间（什么时候开始）// 等待多久去执行  3.什么时候结束
       *
       * 6.匿名函数，使用一次就拉倒，下次用的时候再写。 有名字的函数，先写好，想用的时候直接写函数名字就行
       *
       *
       *
       * 8.同步/异步
       * -同步：遇到卡壳，停止运行 ==>程序自上而下的运行，如果遇到bug，就会停止在那，不会运行下面的 Synchronous 我这要是卡壳了，下面的就没法运行
       * -异步：你遇到卡壳，我继续运行 ==>Asynchronous  你走你的，我走我的，互不影响。你卡壳了，我继续走我的，对我没有影响
       * *js是同步单线程:
       * ---console.log("hello");
       * ---setInterval(function(){console.log("123")},1000)  //此时，由上而下运行，控制台的结果也是先出现hello，再是计时器123
       * ---如果第一行出现错误，程序是不会开始第二行，直接卡在第一行的错误处，控制台报错：第一行有错误
       * ---说明js是同步sync
       *
       * *定时器是异步多线程的程序
       * *-异步：每个定时器之间不相互影响。网购页面里有好几个定时器，同时开始计时。而不是等计时器1计时完成后，计时器2再开始计时。
       * -页面加载和定时器开始是同时进行，两条线，互不影响，如果页面出现bug不会影响定时器的计时。主页面是一套流程，定时器是另一套流程，互不影响
       * *-多线程：每开一个定时器，就会有一个线程。一个页面里可以有很多个计时器
       *
       * 9.单线程/多线程
       * -多线程：多个程序可以同时进行。并行
       * -比如：装修房子（进程），厨房/卧室/客厅同时一起装修（线程），这就是多线程。
       * 
       * 页面~定时器  一个页面里有多个定时器方法，主页面是一套流程，定时器是另一套流程。当打开页面，加载页面的时候，定时器也会同步开始运行。
       * ---定时器们它们会同时开始运行，并不会先等上一个的定时器运行完，下一个的再运行。
       *
       * 10.停止计时 对象是window，可以直接调用
       * --clearInterval(线程号)    setInterval()
       * --clearTimeout(线程号)     setTimeout()
       * ---为了减少占内存，一般停止定时器写两步 clearInterval(timer)  timer=null 把timer变量里的值清空 先停止再清空
       * ---空的变量不占内存
       *
       * 11.线程号
       * -定时器返回的结果就是这个定时器的线程号
       * -建议，每次开定时器的时候，都带着变量名去开，可以记录每个定时器的线程号，这样方便后面的使用：停止定时器。
       *
       * 12.一般来说，项目里的定时器都是在全局使用，不在函数里。因为函数作用域只有在调用的时候，才会创建，调用完成后，函数会被销毁，那函数里的定时器也会被销毁。
       * 所以推荐定时器放在全局，但是会占用内存。
       *
       */

      /*  

        1.
        //每隔一秒，在控制台输出一句话 ==>周期性定时器
        //如果不加停止方法的话，这个setInterval会一直每隔1000毫秒，执行一次，一直执行下去，不停
        setInterval(  function(){console.log("hello");}, 1000 ) 

        //一秒后，在控制台输出这句话 ==>一次性定时器
        //这里，在打开控制台后8000毫秒后执行一次setTimeout，然后就停止
        setTimeout(fn,8000)  //函数名
        function fn(){
            console.log("bonjour")
        }

        window.setTimeout(function(){console.log("une grande soleil");},5000)  //匿名函数 
        
        2.
         var timer=setInterval(function(){console.log("timer")},1000) //此时，定时器会执行吗，走了吗？不就是给变量timer赋值吗？
                                // 会，因为在匿名函数外套了个小括号，函数被调用，所以会执行
            console.log(timer); //1  这个定时器的线程号

        //一般来说 函数的执行是没有结果的，想要返回结果，使用return.但是js里定时器方法里的函数被调用是会返回值的，不需要return，js自己在内部已经封装好了
        //因为给变量timer赋值的是函数的执行结果，所以定时器方法的返回结果是这个定时器的线程号
        
        3.
        
        //3.close timer
        var btn=document.getElementById("btn")
        btn.onclick=function(){
            clearInterval(timer1)
            timer1=null  //停止定时器2部走：先clear停止，再null清空，不占内存
        }

        // 1.open timer
            var timer1=setInterval(function(){console.log("定时器1-interval");},1000)
            
            var timer2=setTimeout(function(){console.log("定时器2-timeout");}, 1000);

            console.log(timer1,timer2); //1 2


         //2.close timer
            clearInterval(timer1)
            clearTimeout(2) //直接写线程号也可以,但是强烈不推荐这样使用 
            
            
            
        //4.
         // 定时器推荐写法：为了减少内存占用，使用定时器的时候，在开头和结尾都给它清空，timer=null
            // 1.open timer
            var timer1=null  //!先定义一个定时器（这叫声明一个定时器）不占内存
            timer1 = setInterval(function () {
                console.log("定时器1-interval");
            }, 1000);  //再（这叫调用）调用定时器 ，给timer1赋值，占内存

            var btn = document.getElementById("btn");
            btn.onclick = function () {
                clearInterval(timer1);  //这叫停止定时器，但是值还在，仍旧占内存
                timer1 = null;  //! 回归原来，不占内存
                //停止定时器2部走：先clear停止，再null清空，不占内存
            };
                
                //定时器打开--关闭--再次打开
              function fn(){
                console.log("hello");
              }
              //打开定时器timer
              var timer=setInterval(fn,1000)  //把setInterval(fn,1000)返回的线程号赋值给变量名为timer，方便后面使用，记忆
              //关闭定时器timer
              clearInterval(timer)  //关闭定时器两部曲：先关闭，再清除
              timer=null
              //重新启动定时器/再次打开定时器timer
              timer=setInterval(fn,1000) //再次把setInterval(fn,1000)赋值给timer
              //不需要再次声明 var timer 不要这样写
            */
    </script>
  </body>
</html>
